require 'rubygems'
<% if app_class # modern way of declaring Sinatra apps %>
require 'sinatra/base'
<% else # old way of declaring Sinatra apps %>
require 'sinatra'

root = File.dirname(__FILE__)

Sinatra::Application.default_options.merge! \
  :run => false,
  :root => root,
  :app_file => File.join(root, '<%= app_file %>'),
  :views => File.join(root, 'views')
<% end %>

load File.join(File.dirname(__FILE__), '<%= app_file %>')

<% if app_class %>
run <%= app_class %>
<% end %>